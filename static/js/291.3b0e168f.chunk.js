"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[291],{1291:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var n=t(9950),o=t(6491),l=t(5333),r=t(226),i=t(5277),c=t(2053),s=t(899),d=t(20),u=t(9890),g=t(6639),h=t(7901),p=t(2578),m=t(1975),x=t(9153),y=t(9751),v=t(2845),f=t(4414);const A=e=>{let{file:a,onRemove:t,index:r}=e;const[i,c]=(0,n.useState)("");return(0,n.useEffect)((()=>{if(a){const e=URL.createObjectURL(a);return c(e),()=>{URL.revokeObjectURL(e)}}}),[a]),(0,f.jsx)(o.A,{sx:{position:"relative",display:"inline-block"},children:a?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("img",{src:i,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),(0,f.jsx)(l.A,{color:"error",size:"small",onClick:()=>t(a),sx:{position:"absolute",top:0,right:0},children:"\xd7"})]}):(0,f.jsx)(o.A,{sx:{width:"100px",height:"100px",border:"1px dashed gray",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"},children:r+1})})},b=()=>{const[e,a]=(0,n.useState)(""),[t,b]=(0,n.useState)(""),[j,C]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[S,E]=(0,n.useState)(""),[I,P]=(0,n.useState)(""),[R,D]=(0,n.useState)(!1),[V,K]=(0,n.useState)(""),[G,U]=(0,n.useState)([]),[z,F]=(0,n.useState)("Aerea"),[L,N]=(0,n.useState)(null),[W,Z]=(0,n.useState)(null),[q,B]=(0,n.useState)([]),[T,H]=(0,n.useState)(!0),[O,X]=(0,n.useState)([]),[M,Y]=(0,n.useState)([]),[_,J]=(0,n.useState)([]),[Q,$]=(0,n.useState)([]),[ee,ae]=(0,n.useState)({}),[te,ne]=(0,n.useState)(""),[oe,le]=(0,n.useState)(""),[re,ie]=(0,n.useState)(""),ce=(0,p.C3)(x.A),se=(0,y.c7)(x.A),de=async e=>{const a=(0,y.KR)(se,"Imagenes/Nuevo/".concat(Date.now(),".jpeg"));return await(0,y.D)(a,e),await(0,y.qk)(a)},ue=async e=>new Promise(((a,t)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{const e=new Image;e.src=n.result,e.onload=()=>{const t=document.createElement("canvas"),n=1200;let o=e.width,l=e.height;o>l?o>n&&(l*=n/o,o=n):l>900&&(o*=900/l,l=900),t.width=o,t.height=l;t.getContext("2d").drawImage(e,0,0,o,l);const r=t.toDataURL("image/jpeg",.9);a(ge(r))},e.onerror=e=>t(e)},n.onerror=e=>t(e)})),ge=e=>{const a=atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(a.length),o=new Uint8Array(n);for(let l=0;l<a.length;l++)o[l]=a.charCodeAt(l);return new Blob([n],{type:t})},he=e=>{H(!1),ie(e),console.log("Selected view: ".concat(e))};(0,n.useEffect)((()=>{if(""!==re){((e,a)=>{const t=(0,p.KR)(ce,"GE/Categorias/".concat(re));(0,p.Jt)(t).then((e=>{const a=[];e.forEach((e=>{const t=e.val();t&&!(0,m.D0)(t.Codigo,M)&&(console.log(t.Estado,"an"),a.push(t))})),console.log(a,"wettin"),Y(a)})).catch((e=>{console.error("Error fetching data:",e)}))})()}return()=>{}}),[re]);const pe=e=>{console.log(e,"es");const a=(0,p.KR)(ce,"GE/Secciones/".concat(e));(0,p.Jt)(a).then((e=>{const a=[];e.forEach((e=>{const t=e.val();a.push(t)})),console.log(a,"wettin"),J(a)})).catch((e=>{console.error("Error fetching data:",e)}))};return(0,f.jsxs)(o.A,{children:[(0,f.jsx)(v.A,{texto:"Publicar Prod"}),T&&(0,f.jsxs)(o.A,{sx:{display:"flex",gap:5,m:10},children:[(0,f.jsx)(r.A,{variant:"contained",onClick:()=>he("Nacional"),children:"Nacional"}),(0,f.jsx)(r.A,{variant:"contained",onClick:()=>he("Exterior"),children:"Exterior"})]}),""!==re&&(0,f.jsxs)(o.A,{component:"form",onSubmit:async n=>{if(null!==L&&null!==W){n.preventDefault(),D(!0);let l=Date.now();try{const n=await de(G[0]),o=(0,p.VC)((0,p.KR)(ce,"GE/".concat(re,"/Prod"))).key;let r,i="Exterior"===re?"C0y1aQsV5NZNLBuvprio3vXy2LR2":"kbJogy4k8gN7nSK2QUFXwMpXSXz1";if("Exterior"===re){let a=""!==w?1e-6*w:"";r={Titulo:e,Condicion:"Nuevo",Categoria:L,Subcategoria:W,Codigo:o,Precio:parseInt(t),Envio:z,Stock:!0,Descuento:0,Peso:""!==j?parseFloat(j):0,Dimension:parseFloat(a.toFixed(4)),Ubicacion:I,Pais:"China",Detalles:V,Imagen:n,Vistos:0,Duracion:"20-35 dias",Vendedor:i,Compras:0,Fecha:l}}else r={Titulo:e,Condicion:"Nuevo",Categoria:L,Cantidad:0,Subcategoria:W,Codigo:o,Peso:""!==j?parseFloat(j):0,Precio:parseInt(t),Stock:!1,Descuento:0,Ubicacion:I,Pais:"Guinea Ecuatorial",Detalles:V,Imagen:n,Vistos:0,Vendedor:i,Compras:0,Fecha:l};let c={};c["GE/".concat(re,"/Prod/").concat(o)]=r,c["GE/Filtros/".concat(re,"/").concat(L,"/").concat(o)]=r,c["GE/Vendedores/".concat(i,"/Prod/").concat(o)]=r,await(0,p.yo)((0,p.KR)(ce),c);for(const e of O){const a=(0,p.VC)((0,p.KR)(ce,"GE/".concat(re,"/Prod/").concat(o,"/Color"))).key,t="GE/".concat(re,"/Prod/").concat(o,"/Color/").concat(a);await(0,p.hZ)((0,p.KR)(ce,t),{label:e,codigo:a})}for(const e in ee)if(ee.hasOwnProperty(e)){const a=(0,p.VC)((0,p.KR)(ce,"GE/".concat(re,"/Prod/").concat(o,"/Talla"))).key,n="GE/".concat(re,"/Prod/").concat(o,"/Talla/").concat(a);await(0,p.hZ)((0,p.KR)(ce,n),{label:e,precio:parseInt(""===ee[e]?t:ee[e]),codigo:a})}for(let e=0;e<G.length;e++)if(0===e){const e="GE/".concat(re,"/Prod/").concat(o,"/Imagenes/").concat(o);await(0,p.hZ)((0,p.KR)(ce,e),{Imagen:n,codigo:o})}else{const a=await de(G[e]),t=(0,p.VC)((0,p.KR)(ce,"GE/".concat(re,"/Prod/").concat(o,"/Imagenes"))).key,n="GE/".concat(re,"/Prod/").concat(o,"/Imagenes/").concat(t);await(0,p.hZ)((0,p.KR)(ce,n),{Imagen:a,codigo:t})}a(""),b(""),K(""),U([]),F(null),N(null),Z(null),ae({}),$([]),k(""),C(""),E(""),P(""),X([]),ne(""),le(""),console.log("Publishing item:",r)}catch(o){alert("ERROR INESPERADO"),console.error("Transaction failed: ",o)}finally{D(!1)}}},sx:{padding:2,paddingTop:8},children:["Exterior"===re&&(0,f.jsx)("div",{style:{margin:10},children:[{label:"Aerea",value:"Aerea"},{label:"Maritima",value:"Maritima"}].map((e=>(0,f.jsx)(i.A,{label:e.label,style:{margin:3},clickable:!0,onClick:()=>{return a=e.label,console.log(a),void(a!==z&&F(a));var a},color:z===e.label?"primary":"default"},e.value)))}),M.length>0&&(0,f.jsx)(c.A,{children:"Categorias"}),(0,f.jsx)("div",{style:{margin:10},children:M.map((e=>(0,f.jsx)(i.A,{label:e.seccion,style:{margin:3},clickable:!0,onClick:()=>{var a;(a=e.seccion)!==L&&(Z(null),N(a),pe(a))},color:L===e.seccion?"primary":"default"},e.icono)))}),_.length>0&&(0,f.jsx)(c.A,{children:"SubCategorias"}),(0,f.jsx)("div",{style:{margin:10},children:_.map((e=>(0,f.jsx)(i.A,{label:e.seccion,style:{margin:3},clickable:!0,onClick:()=>{return a=e.seccion,void Z(a);var a},color:W===e.seccion?"primary":"default"},e.icono)))}),(0,f.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Title",variant:"outlined",value:e,onChange:e=>a((0,m.Zr)(e.target.value)),required:!0,fullWidth:!0})}),(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Ubicacion",variant:"outlined",value:I,onChange:e=>P(e.target.value),required:!0,fullWidth:!0})}),(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Price",variant:"outlined",type:"number",value:t,onChange:e=>b(e.target.value),required:!0,fullWidth:!0})}),"Nacional"===re||"Aerea"===z?(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Introduzca los Kg",variant:"outlined",type:"number",value:j,onChange:e=>C(e.target.value),required:!0,fullWidth:!0})}):null,"Nacional"!==re&&(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Introduzca los Cm3",variant:"outlined",type:"number",value:w,onChange:e=>k(e.target.value),required:!0,fullWidth:!0})}),(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(d.A,{label:"Details",variant:"outlined",multiline:!0,rows:4,value:V,onChange:e=>K(e.target.value),required:!0,fullWidth:!0})}),(0,f.jsxs)("div",{style:{margin:10},children:[(0,f.jsx)(u.A,{value:te,onChange:e=>ne(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),te.trim()&&(X([...O,te.trim()]),ne("")))},placeholder:"Introduzca Color"}),O.map(((e,a)=>(0,f.jsx)(i.A,{label:e,style:{margin:3},onDelete:()=>{return a=e,void X(O.filter((e=>e!==a)));var a}},a)))]}),(0,f.jsxs)("div",{style:{margin:10},children:[(0,f.jsx)(u.A,{value:oe,onChange:e=>le(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),oe.trim()&&($([...Q,oe.trim()]),ae({...ee,[oe.trim()]:""}),le("")))},placeholder:"Introduzca Estilo"}),Q.map(((e,a)=>(0,f.jsxs)(o.A,{display:"flex",alignItems:"center",marginY:1,children:[(0,f.jsx)(i.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),$(Q.filter((a=>a!==e)));const a={...ee};delete a[e],ae(a)})(e)}),(0,f.jsx)(d.A,{label:"Price",type:"number",value:ee[e]||"",onChange:a=>((e,a)=>{ae({...ee,[a]:e.target.value})})(a,e),style:{marginLeft:"8px"}})]},a)))]}),(0,f.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,f.jsx)(c.A,{variant:"subtitle1",gutterBottom:!0,children:"Images (up to 5)"}),(0,f.jsx)(u.A,{type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const a=Array.from(e.target.files),t=await Promise.all(a.map((async e=>await ue(e))));t.length+G.length<10?U([...G,...t]):alert("You can upload up to 9 images only.")},required:!0,startAdornment:(0,f.jsx)(l.A,{color:"primary","aria-label":"upload pictures",component:"label",children:(0,f.jsx)(h.A,{})})}),(0,f.jsx)(o.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:G.map(((e,a)=>(0,f.jsx)(A,{file:e,onRemove:()=>(e=>{U(G.filter(((a,t)=>t!==e)))})(a),index:a},a)))})]}),(0,f.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,f.jsx)(r.A,{type:"submit",variant:"contained",color:"primary",children:R?(0,f.jsx)(g.A,{color:"warning",size:24}):"PUBLICAR"})})]})]})]})}},2845:(e,a,t)=>{t.d(a,{A:()=>u});var n=t(9950),o=t(8429),l=t(4857),r=t(6589),i=t(5333),c=t(3189),s=t(4414);const d=e=>{let{texto:a}=e;const t=(0,l.A)(),n=(0,r.A)(t.breakpoints.down("sm")),d=(0,o.Zp)();return(0,s.jsx)(s.Fragment,{children:n&&(0,s.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:60,padding:t.spacing(1),backgroundColor:t.palette.background.paper,boxShadow:t.shadows[2],display:"flex",alignItems:"center",zIndex:1e3,boxSizing:"border-box"},children:[(0,s.jsx)(i.A,{onClick:()=>d(-1),"aria-label":"back",children:(0,s.jsx)(c.A,{})}),(0,s.jsx)("h2",{style:{marginLeft:t.spacing(2)},children:a})]})})},u=n.memo(d)},9153:(e,a,t)=>{t.d(a,{A:()=>r});var n=t(815),o=t(9713);const l=(0,n.Wp)({apiKey:"AIzaSyC6r22uPQBahRmtyRsn26WeensEOg5TZ5k",authDomain:"chekeaapp-f5abe.firebaseapp.com",databaseURL:"https://chekeaapp-f5abe.firebaseio.com",projectId:"chekeaapp-f5abe",storageBucket:"chekeaapp-f5abe.appspot.com",messagingSenderId:"1018071683424",appId:"1:1018071683424:web:62b2adfc270f618399ce05",measurementId:"G-B0XYV7SVYF"}),r=((0,o.P5)(l),l)},1975:(e,a,t)=>{t.d(a,{D0:()=>o,Zr:()=>l,o6:()=>n});t(9950),t(2578);const n=e=>{const a=e.match(/\d{5}$/);return a?a[0]:null};let o=(e,a)=>a.some((a=>a.Codigo===e));const l=e=>"string"!==typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)},7901:(e,a,t)=>{var n=t(4994);a.A=void 0;var o=n(t(9526)),l=t(4414);a.A=(0,o.default)((0,l.jsx)("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5m-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2"}),"AddAPhoto")}}]);