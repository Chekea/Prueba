"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[291],{1291:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var o=t(9950),n=t(6491),l=t(5333),i=t(226),r=t(5277),c=t(2053),s=t(899),d=t(20),u=t(9890),g=t(6639),x=t(7901),h=t(2578),m=t(1975),p=t(294),v=t(9751),y=t(2845),A=t(6641),j=t(4414);const f=e=>{let{file:a,onRemove:t,index:i}=e;const[r,c]=(0,o.useState)("");return(0,o.useEffect)((()=>{if(a){const e=URL.createObjectURL(a);return c(e),()=>{URL.revokeObjectURL(e)}}}),[a]),(0,j.jsx)(n.A,{sx:{position:"relative",display:"inline-block"},children:a?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:r,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),(0,j.jsx)(l.A,{color:"error",size:"small",onClick:()=>t(a),sx:{position:"absolute",top:0,right:0},children:"\xd7"})]}):(0,j.jsx)(n.A,{sx:{width:"100px",height:"100px",border:"1px dashed gray",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"},children:i+1})})},b=()=>{const[e,a]=(0,o.useState)(""),[t,b]=(0,o.useState)(""),[C,S]=(0,o.useState)(""),[k,E]=(0,o.useState)(""),[w,P]=(0,o.useState)(""),[I,R]=(0,o.useState)(""),[D,V]=(0,o.useState)(!1),[K,G]=(0,o.useState)(""),[z,L]=(0,o.useState)([]),[N,F]=(0,o.useState)("Aerea"),[U,H]=(0,o.useState)(null),[W,q]=(0,o.useState)(null),[T,Z]=(0,o.useState)([]),[M,O]=(0,o.useState)(!0),[B,X]=(0,o.useState)([]),[_,J]=(0,o.useState)([]),[Q,Y]=(0,o.useState)([]),[$,ee]=(0,o.useState)([]),[ae,te]=(0,o.useState)({}),[oe,ne]=(0,o.useState)(""),[le,ie]=(0,o.useState)(""),[re,ce]=(0,o.useState)(""),se=(0,h.C3)(p.A),de=((0,v.c7)(p.A),e=>{O(!1),ce(e),console.log("Selected view: ".concat(e))});(0,o.useEffect)((()=>{if(""!==re){((e,a)=>{const t=(0,h.KR)(se,"GE/Categorias/".concat(re));(0,h.Jt)(t).then((e=>{const a=[];e.forEach((e=>{const t=e.val();t&&!(0,m.D0)(t.Codigo,_)&&(console.log(t.Estado,"an"),a.push(t))})),console.log(a,"wettin"),J(a)})).catch((e=>{console.error("Error fetching data:",e)}))})()}return()=>{}}),[re]);const ue=e=>{console.log(e,"es");const a=(0,h.KR)(se,"GE/Secciones/".concat(e));(0,h.Jt)(a).then((e=>{const a=[];e.forEach((e=>{const t=e.val();a.push(t)})),console.log(a,"wettin"),Y(a)})).catch((e=>{console.error("Error fetching data:",e)}))};return(0,j.jsxs)(n.A,{children:[(0,j.jsx)(y.A,{texto:"Publicar Prod"}),M&&(0,j.jsxs)(n.A,{sx:{display:"flex",gap:5,m:10},children:[(0,j.jsx)(i.A,{variant:"contained",onClick:()=>de("Nacional"),children:"Nacional"}),(0,j.jsx)(i.A,{variant:"contained",onClick:()=>de("Exterior"),children:"Exterior"})]}),""!==re&&(0,j.jsxs)(n.A,{component:"form",onSubmit:async o=>{if(null!==U&&null!==W){o.preventDefault(),V(!0);let l=Date.now();try{const o=await(0,A.V6)(z[0],"Imagenes/Nuevo/".concat(Date.now(),".jpeg")),n=(0,h.VC)((0,h.KR)(se,"GE/".concat(re,"/Prod"))).key;let i,r="Exterior"===re?"C0y1aQsV5NZNLBuvprio3vXy2LR2":"kbJogy4k8gN7nSK2QUFXwMpXSXz1";if("Exterior"===re){let a=""!==k?1e-6*k:"";i={Titulo:e,Condicion:"Nuevo",Categoria:U,Subcategoria:W,Codigo:n,Precio:parseInt(t),Envio:N,Stock:!0,Descuento:0,Peso:""!==C?parseFloat(C):0,Dimension:parseFloat(a.toFixed(4)),Ubicacion:I,Pais:"China",Detalles:K,Imagen:o,Vistos:0,Duracion:"20-35 dias",Vendedor:r,Compras:0,Fecha:l}}else i={Titulo:e,Condicion:"Nuevo",Categoria:U,Cantidad:0,Subcategoria:W,Codigo:n,Peso:""!==C?parseFloat(C):0,Precio:parseInt(t),Stock:!1,Descuento:0,Ubicacion:I,Pais:"Guinea Ecuatorial",Detalles:K,Imagen:o,Vistos:0,Vendedor:r,Compras:0,Fecha:l};let c={};c["GE/".concat(re,"/Prod/").concat(n)]=i,c["GE/Filtros/".concat(re,"/").concat(U,"/").concat(n)]=i,c["GE/Vendedores/".concat(r,"/Prod/").concat(n)]=i,await(0,h.yo)((0,h.KR)(se),c);for(const e of B){const a=(0,h.VC)((0,h.KR)(se,"GE/".concat(re,"/Prod/").concat(n,"/Color"))).key,t="GE/".concat(re,"/Prod/").concat(n,"/Color/").concat(a);await(0,h.hZ)((0,h.KR)(se,t),{label:e,codigo:a})}for(const e in ae)if(ae.hasOwnProperty(e)){const a=(0,h.VC)((0,h.KR)(se,"GE/".concat(re,"/Prod/").concat(n,"/Talla"))).key,o="GE/".concat(re,"/Prod/").concat(n,"/Talla/").concat(a);await(0,h.hZ)((0,h.KR)(se,o),{label:e,precio:parseInt(""===ae[e]?t:ae[e]),codigo:a})}for(let e=0;e<z.length;e++)if(0===e){const e="GE/".concat(re,"/Prod/").concat(n,"/Imagenes/").concat(n);await(0,h.hZ)((0,h.KR)(se,e),{Imagen:o,codigo:n})}else{const a=await(0,A.V6)(z[e]),t=(0,h.VC)((0,h.KR)(se,"GE/".concat(re,"/Prod/").concat(n,"/Imagenes"))).key,o="GE/".concat(re,"/Prod/").concat(n,"/Imagenes/").concat(t);await(0,h.hZ)((0,h.KR)(se,o),{Imagen:a,codigo:t})}a(""),b(""),G(""),L([]),F(null),H(null),q(null),te({}),ee([]),E(""),S(""),P(""),R(""),X([]),ne(""),ie(""),console.log("Publishing item:",i)}catch(n){alert("ERROR INESPERADO"),console.error("Transaction failed: ",n)}finally{V(!1)}}},sx:{padding:2,paddingTop:8},children:["Exterior"===re&&(0,j.jsx)("div",{style:{margin:10},children:[{label:"Aerea",value:"Aerea"},{label:"Maritima",value:"Maritima"}].map((e=>(0,j.jsx)(r.A,{label:e.label,style:{margin:3},clickable:!0,onClick:()=>{return a=e.label,console.log(a),void(a!==N&&F(a));var a},color:N===e.label?"primary":"default"},e.value)))}),_.length>0&&(0,j.jsx)(c.A,{children:"Categorias"}),(0,j.jsx)("div",{style:{margin:10},children:_.map((e=>(0,j.jsx)(r.A,{label:e.seccion,style:{margin:3},clickable:!0,onClick:()=>{var a;(a=e.seccion)!==U&&(q(null),H(a),ue(a))},color:U===e.seccion?"primary":"default"},e.icono)))}),Q.length>0&&(0,j.jsx)(c.A,{children:"SubCategorias"}),(0,j.jsx)("div",{style:{margin:10},children:Q.map((e=>(0,j.jsx)(r.A,{label:e.seccion,style:{margin:3},clickable:!0,onClick:()=>{return a=e.seccion,void q(a);var a},color:W===e.seccion?"primary":"default"},e.icono)))}),(0,j.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Title",variant:"outlined",value:e,onChange:e=>a((0,m.Zr)(e.target.value)),required:!0,fullWidth:!0})}),(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Ubicacion",variant:"outlined",value:I,onChange:e=>R(e.target.value),required:!0,fullWidth:!0})}),(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Price",variant:"outlined",type:"number",value:t,onChange:e=>b(e.target.value),required:!0,fullWidth:!0})}),"Nacional"===re||"Aerea"===N?(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Introduzca los Kg",variant:"outlined",type:"number",value:C,onChange:e=>S(e.target.value),required:!0,fullWidth:!0})}):null,"Nacional"!==re&&(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Introduzca los Cm3",variant:"outlined",type:"number",value:k,onChange:e=>E(e.target.value),required:!0,fullWidth:!0})}),(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Details",variant:"outlined",multiline:!0,rows:4,value:K,onChange:e=>G(e.target.value),required:!0,fullWidth:!0})}),(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(u.A,{value:oe,onChange:e=>ne(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),oe.trim()&&(X([...B,oe.trim()]),ne("")))},placeholder:"Introduzca Color"}),B.map(((e,a)=>(0,j.jsx)(r.A,{label:e,style:{margin:3},onDelete:()=>{return a=e,void X(B.filter((e=>e!==a)));var a}},a)))]}),(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(u.A,{value:le,onChange:e=>ie(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),le.trim()&&(ee([...$,le.trim()]),te({...ae,[le.trim()]:""}),ie("")))},placeholder:"Introduzca Estilo"}),$.map(((e,a)=>(0,j.jsxs)(n.A,{display:"flex",alignItems:"center",marginY:1,children:[(0,j.jsx)(r.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),ee($.filter((a=>a!==e)));const a={...ae};delete a[e],te(a)})(e)}),(0,j.jsx)(d.A,{label:"Price",type:"number",value:ae[e]||"",onChange:a=>((e,a)=>{te({...ae,[a]:e.target.value})})(a,e),style:{marginLeft:"8px"}})]},a)))]}),(0,j.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,j.jsx)(c.A,{variant:"subtitle1",gutterBottom:!0,children:"Images (up to 5)"}),(0,j.jsx)(u.A,{type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const a=Array.from(e.target.files),t=await Promise.all(a.map((async e=>await(0,m.w4)(e))));t.length+z.length<10?L([...z,...t]):alert("You can upload up to 9 images only.")},required:!0,startAdornment:(0,j.jsx)(l.A,{color:"primary","aria-label":"upload pictures",component:"label",children:(0,j.jsx)(x.A,{})})}),(0,j.jsx)(n.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:z.map(((e,a)=>(0,j.jsx)(f,{file:e,onRemove:()=>(e=>{L(z.filter(((a,t)=>t!==e)))})(a),index:a},a)))})]}),(0,j.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,j.jsx)(i.A,{type:"submit",variant:"contained",color:"primary",children:D?(0,j.jsx)(g.A,{color:"warning",size:24}):"PUBLICAR"})})]})]})]})}},2845:(e,a,t)=>{t.d(a,{A:()=>u});var o=t(9950),n=t(8429),l=t(4857),i=t(6589),r=t(5333),c=t(3189),s=t(4414);const d=e=>{let{texto:a}=e;const t=(0,l.A)(),o=(0,i.A)(t.breakpoints.down("sm")),d=(0,n.Zp)();return(0,s.jsx)(s.Fragment,{children:o&&(0,s.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:60,padding:t.spacing(1),backgroundColor:t.palette.background.paper,boxShadow:t.shadows[2],display:"flex",alignItems:"center",zIndex:1e3,boxSizing:"border-box"},children:[(0,s.jsx)(r.A,{onClick:()=>d(-1),"aria-label":"back",children:(0,s.jsx)(c.A,{})}),(0,s.jsx)("h2",{style:{marginLeft:t.spacing(2)},children:a})]})})},u=o.memo(d)},7901:(e,a,t)=>{var o=t(4994);a.A=void 0;var n=o(t(9526)),l=t(4414);a.A=(0,n.default)((0,l.jsx)("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5m-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2"}),"AddAPhoto")},3189:(e,a,t)=>{var o=t(4994);a.A=void 0;var n=o(t(9526)),l=t(4414);a.A=(0,n.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);